(this.webpackJsonpestics=this.webpackJsonpestics||[]).push([[0],[,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var c="pHPA5snwQtXPyDs1V37sm71z4CP7PI6R",r="https://api.giphy.com/v1"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(3),r=(n(18),n(0));function i(e){var t=e.name,n=e.options,i=void 0===n?[]:n;return Object(r.jsxs)("div",{className:"Category",children:[Object(r.jsx)("h3",{className:"Category-title",children:t}),Object(r.jsx)("ul",{className:"Category-list",children:i.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(c.a,{className:"Category-link",to:"/search/".concat(e),children:e})},e)}))})]})}},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(9),s=n.n(i),a=(n(16),n(17),n(2)),o=n(3),j=n(8),l=(n(20),n(0));function u(e){var t=e.title,n=e.id,c=e.url;return Object(l.jsx)("div",{className:"Gif",children:Object(l.jsxs)(o.a,{to:"/sticker/".concat(n),className:"Gif-link",children:[Object(l.jsx)("h4",{children:t}),Object(l.jsx)("img",{loading:"lazy",alt:t,src:c})]})})}n(21);function d(e){var t=e.gifs;return Object(l.jsx)("div",{className:"ListOfGifs",children:t.map((function(e){var t=e.id,n=e.title,c=e.url;return Object(l.jsx)(u,{id:t,title:n,url:c},t)}))})}n(22);function b(){return Object(l.jsxs)("div",{className:"lds-ring",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.distance,r=void 0===t?"100px":t,i=e.externalRef,s=e.once,o=void 0===s||s,j=Object(c.useState)(!1),l=Object(a.a)(j,2),u=l[0],d=l[1],b=Object(c.useRef)();return Object(c.useEffect)((function(){var e,t=i?i.current:b.current;if(t){var c=function(e,t){e[0].isIntersecting?(d(!0),o&&t.disconnect()):!o&&d(!1)};return Promise.resolve("undefined"!==typeof IntersectionObserver?IntersectionObserver:n.e(4).then(n.t.bind(null,24,7))).then((function(){(e=new IntersectionObserver(c,{rootMargin:r})).observe(t)})),function(){return e&&e.disconnect()}}}),[r,i,o]),{isNearScreen:u,fromRef:b}}var O=r.a.lazy((function(){return n.e(3).then(n.bind(null,26))}));function h(){var e=f({distance:"100px"}),t=e.isNearScreen,n=e.fromRef;return Object(l.jsx)("div",{ref:n,children:Object(l.jsx)(c.Suspense,{fallback:Object(l.jsx)(b,{}),children:t?Object(l.jsx)(O,{}):null})})}var x=n(7);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,n=void 0===t?5:t,c=e.keyword,r=void 0===c?"taxipictures":c,i=e.page,s=void 0===i?0:i,a="".concat(x.b,"/stickers/search?api_key=").concat(x.a,"&q=").concat(r,"&limit=").concat(n,"&offset=").concat(s*n,"&rating=g&lang=en");return fetch(a).then((function(e){return e.json()})).then((function(e){return e.data.map((function(e){var t=e.images;return{title:e.title,id:e.id,url:t.downsized_medium.url}}))}))}var g=r.a.createContext({});function p(e){var t=e.children,n=Object(c.useState)([]),r=Object(a.a)(n,2),i=r[0],s=r[1];return Object(l.jsx)(g.Provider,{value:{gifs:i,setGifs:s},children:t})}var m=g;function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:null},t=e.keyword,n=Object(c.useState)(!1),r=Object(a.a)(n,2),i=r[0],s=r[1],o=Object(c.useState)(!1),j=Object(a.a)(o,2),l=j[0],u=j[1],d=Object(c.useState)(0),b=Object(a.a)(d,2),f=b[0],O=b[1],h=Object(c.useContext)(m),x=h.gifs,g=h.setGifs,p=t||localStorage.getItem("lastKeyword")||"void";return Object(c.useEffect)((function(){s(!0),v({keyword:p}).then((function(e){g(e),s(!1),localStorage.setItem("lastKeyword",p)}))}),[t,p,g]),Object(c.useEffect)((function(){0!==f&&(u(!0),v({keyword:p,page:f}).then((function(e){g((function(t){return t.concat(e)})),u(!1)})))}),[p,f,g]),{loading:i,gifs:x,setPage:O,loadingNextPage:l}}function N(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(o.c)(),s=Object(a.a)(i,2),u=(s[0],s[1]),f=y(),O=f.loading,x=f.gifs;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u("/search/".concat(n))},children:[Object(l.jsx)("button",{children:"Search"}),Object(l.jsx)("input",{placeholder:"Search a sticker here...",onChange:function(e){r(e.target.value)},type:"text",value:n})]}),Object(l.jsxs)("div",{className:"App-main",children:[Object(l.jsxs)("div",{className:"App-results",children:[Object(l.jsx)("h3",{className:"App-title",children:"Last search"}),O?Object(l.jsx)(b,{}):Object(l.jsx)(d,{gifs:x})]}),Object(l.jsxs)("div",{className:"App-category",children:[Object(l.jsx)(h,{}),Object(l.jsx)(j.a,{name:"Others",options:["Spain","Sun","Code","Travel"]})]})]})]})}var k=n(10),S=n.n(k);function w(e){var t=e.params.keyword,n=y({keyword:t}),r=n.loading,i=n.gifs,s=n.setPage,a=n.loadingNextPage,o=Object(c.useRef)(),j=f({externalRef:r?null:o,once:!1}).isNearScreen;console.log(j);var u=Object(c.useCallback)(S()((function(){return s((function(e){return++e}))}),300),[]);return Object(c.useEffect)((function(){j&&u()})),Object(l.jsxs)(l.Fragment,{children:[r?Object(l.jsx)(b,{}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h3",{className:"App-title",children:decodeURI(t)}),Object(l.jsx)(d,{gifs:i})]}),a&&Object(l.jsx)(b,{}),Object(l.jsx)("div",{id:"visor",ref:o})]})}var C=n(11);function P(e){var t=e.params,n=Object(c.useContext)(m).gifs.find((function(e){return e.id===t.id}));return Object(l.jsx)(l.Fragment,{children:n&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h3",{className:"App-title",children:n.title}),Object(l.jsx)(u,Object(C.a)({},n)),";"]})})}var A=Object(c.createContext)({});var I=function(){return Object(l.jsx)(A.Provider,{value:{name:"nilquera"},children:Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)("section",{className:"App-content",children:[Object(l.jsx)(o.a,{to:"/",children:Object(l.jsx)("figure",{className:"App-logo",children:Object(l.jsx)("img",{alt:"Estics logo",src:"/logo.png"})})}),Object(l.jsxs)(p,{children:[Object(l.jsx)(o.b,{component:N,path:"/"}),Object(l.jsx)(o.b,{component:w,path:"/search/:keyword"}),Object(l.jsx)(o.b,{component:P,path:"/sticker/:id"})]})]})})})},F=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,25)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(I,{})}),document.getElementById("root")),F()}],[[23,1,2]]]);
//# sourceMappingURL=main.0445a70f.chunk.js.map